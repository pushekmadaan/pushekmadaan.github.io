<!DOCTYPE html>
<html>
<head>
	<title>My Test Webpage</title>

<a href id="LoginWithAmazon">
    <img border="0" alt="Login with Amazon"
        src="https://images-na.ssl-images-amazon.com/images/G/01/lwa/btnLWA_gold_156x32.png"
        width="156" height="32" />
 </a>
</head>
<body>
	<div id="amazon-root"></div>
 	<script type="text/javascript">
    window.onAmazonLoginReady = function() {
   	console.log("Form loaded, trying top set the client ID");
      amazon.Login.setClientId('amzn1.application-oa2-client.289145aaed6a4a908547bdde7f63cf16');
	    //document.getElementById('LoginWithAmazon').click();
            console.log("Form loaded, client ID set");
    };
    (function(d) {
      var a = d.createElement('script'); 
      a.type = 'text/javascript';
      a.async = true; 
      a.id = 'amazon-login-sdk';
      a.src = 'https://api-cdn.amazon.com/sdk/login1.js';
      d.getElementById('amazon-root').appendChild(a);
    })(document);

</script>
<button onclick="LogoutAmazon()">Logout</button>
<script type="text/javascript">
	function LogoutAmazon() {
		console.log("logging out");
		amazon.Login.logout();
	};
</script>
<br>Hello World 3

<script type="text/javascript">
    document.getElementById('LoginWithAmazon').onclick = function() {
        console.log("Button clicked, creating packet");
        var deviceModel = 'MyTempSensor001';
        var serialNo = 'MyTempSensor001_1234567890';
        var drsScope = 'dash:replenish';
        var scopeData = new Object();

        scopeData[drsScope] = {
        	device_model: deviceModel,
        	serial: serialNo,
        	should_include_non_live: false,
        	is_test_device: false
        };

        var options = {
        interactive: 'always',
        scope: 'dash:replenish',
        scope_data: scopeData,
        response_type: 'code'
    	   };
	
	amazon.Login.authorize(options, 'https://pushekmadaan.github.io/index.html');
    	return false;
	    
//        amazon.Login.authorize(options, function(response) {
//        	console.log("trying to authorize");
//		  	if ( response.error ) {
//		      alert('oauth error ' + response.error);
//		      return;
//		  	};
//			alert('success: ' + response.code);
//		});
  //      return false;
    };
</script>

</body>
</html>

